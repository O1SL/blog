---
title: "一套简易的家庭观影流程"
summary: "基于PLEX、Qbittorrent、Transmission、PT的家庭观影流程"
date: 2022-07-14T16:02:09+08:00
lastmod: 2022-07-14T16:02:09+08:00
draft: false
author: ["WuJunlin"]
enableCoverzoom: true
tags: 
- PLEX
- Qbittorrent
- Transmission
- PT
weight:  # 输入1可以顶置文章，用来给文章展示排序，不填就默认按时间排序
comments: false
cover:
    image: "https://icon-1302751266.cos.ap-chengdu.myqcloud.com/%E4%B8%80%E5%A5%97%E7%AE%80%E6%98%93%E7%9A%84%E5%AE%B6%E5%BA%AD%E8%A7%82%E5%BD%B1%E6%B5%81%E7%A8%8B/iinfuse.jpg"
    caption: ""
    alt: ""
    relative: false
---
## 前言

著作权、版权这类问题，不在本文讨论的范围内，支持版权所有者获得合法利益。

## 相关信息

### 1. BT、PT

#### BT

> BitTorrent协议（简称BT，俗称比特洪流、BT下载）是用在对等网络中文件分享的网络协议程序。和点对点（point-to-point）的协议程序不同，它是用户群对用户群（peer-to-peer），而且用户越多，下载同一文件的人越多，下载该文件的速度越快。且下载后，继续维持上传的状态，就可以“分享”，成为其用户端节点下载的种子文件（.torrent），同时上传及下载。

简单的来理解就是有A、B、C、D四个人，他们之间构成了一个网络。当A发布了一个文件时，这个文件会被切分为一个一个小块，B、C、D均开始下载这个文件即这些小块。

假设从D的视角来看，他可以直接连接到A，从他那里下载一些小块文件，同时B、C也都从A那里获取了一些小块文件；这时D不仅可以从A继续下载小块文件，同时也可以从B、C处下载一些小块文件，即B、C不仅在下载文件，同时也在上传文件给其他用户。

对于D来说这样的好处是显而易见的：**这个网络里的人越多，下载速度越快。**

在上述过程中
1、D从B、C处下载的小块文件的时候，如何知道B、C处有哪些小块文件，哪些文件已经从A那里下载过了，需要一个tracker服务器来交换同步这些信息。

2、A将一整个文件切分为n个小块文件，如何切分，如何识别，需要一个东西来记录这些信息
这两点合起来就是种子，种子是一个文本文件，包含Tracker信息和文件信息两部分，下载者要下载文件内容，需要先得到相应的种子文件，然后使用BT客户端软件进行下载。

BT的优势在于整个对等网络里的人越多，速度越快，因为每个人既是下载者，也是上传者。

但是实际执行过程中不会完全如预期设想的那样。因为其没有约束机制，用户只想高速下载却不想上传。一般一个内容热度消退了，很容易出现断种，无法下载。例如一些当下正热的影视作品会有较理想的下载速度，但是一些老的资源却下载很慢，甚至无法下载

#### PT

> PT（Private Tracker）是一种BitTorrent协议的P2P下载方式的另一种形式，“Private Tracker”指私有种子服务器。与BT最大的不同点为：进行私密范围下载，并且记录每一个用户的详细数据。

PT的原理和BT是一致的，它针对BT的缺点进行了改良，通过不公开的trcaker服务器，引入注册制度和分享率或保种的要求，来避免只愿意下载不愿意上传的的情况，对用户的上传下载进行了约束，以此来确保种子能够长久活跃，整体有一个很好的下载体验。

从实现方式上，PT一般都是有准入门槛的，通过邀请的方式进入，需要耗费精力来维护帐号，具有私密性和小众性。

### 2. 媒体相关

该部分我的理解也很浅薄，仅记录我的理解，可能存在偏差

#### 编码解码

视频可以视为由一帧一帧的画面组成，如果把每一帧图像全部保存下来，视频体积会非常大，不便于传播和播放。

所以人们想了很多办法来解决这个问题，例如两帧画面仅有少部分变化，那么只需要记录第一帧画面信息和第二帧画面相较于第一帧画面的变化，这个过程就叫做**编码**

当播放的时候，播放器基于第一帧画面信息和第二帧画面相较于第一帧画面的变化，计算还原出第二帧画面的信息，这个过程叫做**解码**

现在主流的编码标准有两种H.264和H.265，H.265相较于H.264，可以在更小的体积实现同样的画质，但现在有部分比较老的硬件是无法解码H.265编码的文件，H.264的兼容性是更好的。

#### 封装格式

​一个视频文件通常由包含视频编码格式的视频数据和音频编码格式的音频数据的容器组成。容器还可以包含同步信息、字幕和元数据（如标题）等，把它们打包起来就是封装。

封装的结果就是我们见到的一个个视频文件，常见后缀有.mp4、.mkv 、.avi等，由封装方式决定。

## 流程

整个观影流程如下图
<img loading="lazy" src="https://icon-1302751266.cos.ap-chengdu.myqcloud.com/%E4%B8%80%E5%A5%97%E7%AE%80%E6%98%93%E7%9A%84%E5%AE%B6%E5%BA%AD%E8%A7%82%E5%BD%B1%E6%B5%81%E7%A8%8B/flow.jpg" type="" alt="chian" class="medium-zoom-image">

以最近发现的一部电视剧《非常律师禹英禑》为例，在Qbittorrent中添加好其 RSS订阅，每周三、四晚当PT站点更新资源后，Qbittorrent会在5min内收到其更新的信息，并开始下载媒体文件，将其下载到剧集文件夹中，PLEX检测到文件夹
变更，根据文件标题识别其信息，最终组织呈现出来。当晚上回家，打开电视就会看到如下，已经更新的剧集。

<img loading="lazy" src="https://icon-1302751266.cos.ap-chengdu.myqcloud.com/%E4%B8%80%E5%A5%97%E7%AE%80%E6%98%93%E7%9A%84%E5%AE%B6%E5%BA%AD%E8%A7%82%E5%BD%B1%E6%B5%81%E7%A8%8B/plex4.jpg" type="" alt="chian" class="medium-zoom-image">

## 相关网站/软件

### 1. PT站点

PT站点是我下载媒体资源的主要渠道。中文环境的PT站点还是挺多的，仅我手上注册在用的就有三十多个站点，PT站点的进入方式有一定门槛，注册后大部分也需要通过考核，通过后还需要保证分享率在1以上，可以通过使用seedbox的方式在前期获得大量的上传，后期就无需考虑上传量，随缘保种上传即可。一般新手可以从开放注册的站点玩起，再一步步进入中型站点、大型站点。

PT站点的一大优势是，媒体资源有序、精致，可以从中下载到远超国内流媒体画质水平的资源，获得高清沉浸的观影体验，不会像网络上其他散乱的资源，画质差、还有广告，且PT站点保证了媒体资源的及时性，命名的合规性，自带字幕等，可以方便后续的plex识别和管理环节。

推荐站点：北洋园、CHDbits、HDChina、柠檬、TTG、观众、葡萄、猫、朋友、OurBits

### 2. 下载器和订阅

PT对于下载器是有要求的，PT站点对下载工具有进一步的要求，会指定软件甚至软件版本。

我使用Qbittorrent(qb)、Transmission(tr)来下载PT站点的资源。

针对电影和已经完结的剧集，采用手动在浏览器插件PTPP上搜索的方式，PTPP是一个可以汇聚查询所有已注册的PT站点的浏览器插件。因为我对资源的大小、格式、字幕有不同的需求，所以每次手动操作。

针对正在更新中的剧集，采用RSS订阅的方式，基本所有的PT站点都提供RSS订阅，设定好关键词后就可以通过RSS的方式及时收到资源更新。qb自带RSS功能，在qb中配置RSS链接和自动下载后，当站点更新资源，qb会将其下载到指定目录中。

<img loading="lazy" src="https://icon-1302751266.cos.ap-chengdu.myqcloud.com/%E4%B8%80%E5%A5%97%E7%AE%80%E6%98%93%E7%9A%84%E5%AE%B6%E5%BA%AD%E8%A7%82%E5%BD%B1%E6%B5%81%E7%A8%8B/qb.jpg" type="" alt="chian" class="medium-zoom-image">

关于目录的设置，需要将电影和剧集分开，放在不同的目录中，方便后续PLEX识别。

### 3. PLEX

PLEX是一个强大的媒体管理软件

<img loading="lazy" src="https://icon-1302751266.cos.ap-chengdu.myqcloud.com/%E4%B8%80%E5%A5%97%E7%AE%80%E6%98%93%E7%9A%84%E5%AE%B6%E5%BA%AD%E8%A7%82%E5%BD%B1%E6%B5%81%E7%A8%8B/plex.jpg" type="" alt="chian" class="medium-zoom-image">

通过PLEX可以很方便的组织本地的媒体文件，刮削其影视信息，以美观的方式展现，并且可以在全平台：ios、macos、AppleTV、Android、AndroidTV、WEB都可以观看，并且同步观看记录，还可以将其分享给好友远程观看。

<img loading="lazy" src="https://icon-1302751266.cos.ap-chengdu.myqcloud.com/%E4%B8%80%E5%A5%97%E7%AE%80%E6%98%93%E7%9A%84%E5%AE%B6%E5%BA%AD%E8%A7%82%E5%BD%B1%E6%B5%81%E7%A8%8B/plex2.jpg" type="" alt="chian" class="medium-zoom-image">

其基本工作原理是，在PLEX中设定好媒体文件的目录，PLEX会读取文件，根据其文件名去刮削影视信息，包含标题、海报、剧情简介、演员列表等信息。

<img loading="lazy" src="https://icon-1302751266.cos.ap-chengdu.myqcloud.com/%E4%B8%80%E5%A5%97%E7%AE%80%E6%98%93%E7%9A%84%E5%AE%B6%E5%BA%AD%E8%A7%82%E5%BD%B1%E6%B5%81%E7%A8%8B/plex3.jpg" type="" alt="chian" class="medium-zoom-image">

所以当qb、tr等下载器从PT站点下载好资源后，PLEX会自动检测到媒体文件夹的变更，会扫描文件夹，更新影视信息。

类似的媒体管理软件还有emby、jellyfin，其中PLEX和emby本地使用免费，但是需要硬件加速转码，全平台使用需要购买其订阅，PLEX终身订阅约四五百元，jellyfin由前emby的工程师出走创建，开源免费。

三者大同小异，功能都基本类似，我比较喜欢PLEX的UI，就购买了PLEX的终身订阅。在AppleTV上还有一个软件infuse，也很美观易用，号称ios平台最强大的播放器，可以链接各类网盘、webadv等服务，也可以链接PLEX、emby的服务器，并且相较原生的PLEX播放器，能更好的支持srt字幕，播放时srt字幕不会有一个半透明背景，界面如封面图所示。

### 4. 辅助信息

#### 通知功能

在这个流程中，各个环节都有简单的通知功能，但是我觉得并不方便美观。我使用了Bark这个开源通知服务，实现了我的通知机器人。

其基本使用方法也比较简单，类似于一个webhook，通过post方法即可向其发送数据，然后通知到手机上，还可以自定义分组和图标。

<img loading="lazy" src="https://icon-1302751266.cos.ap-chengdu.myqcloud.com/%E4%B8%80%E5%A5%97%E7%AE%80%E6%98%93%E7%9A%84%E5%AE%B6%E5%BA%AD%E8%A7%82%E5%BD%B1%E6%B5%81%E7%A8%8B/bark.jpeg" type="" alt="chian" class="medium-zoom-image">

可以方便的让我知道，什么时候开始自动下载某个资源，用时多久，PLEX更新了某个电影或剧集等信息

这些东西就构成了我的简易家庭观影流程，虽然现在也有成套的服务出现，像nas-tool、media-robot等，但我使用后发现他们对我而言都太重型，不满足我的需求，从而使用了现在这套简易的流程。

## 尾声

优秀的影视作品可以带给人奇妙的体验，或令人深思、或捧腹大笑、或紧张刺激，很多作品都给我带来了快乐。所以我想把很多好的东西收藏起来，这就是我的初衷，慢慢的接触到了NAS、PT、PLEX等一系列内容，逐步入坑，演化到了今天的一整套流程。

但是随着年龄的增长，工作繁忙，观影的时间越来越少，下的很多，看的很少，至今我的影视库中已经有752部电影，7901集剧集。折腾这些东西也成了我缓解压力，忙里偷闲的一种方式。

希望我可以永远保持折腾的劲头！